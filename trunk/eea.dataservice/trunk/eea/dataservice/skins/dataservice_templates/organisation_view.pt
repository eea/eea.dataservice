<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="eea">

<body>

<div metal:fill-slot="content-core">

    <!-- Statistics -->
    <tal:block define="data context/@@organisationStatistics;
                       odatasets python:data['owners'][0];
                       ofigures python:data['owners'][1];
                       oexternal python:data['owners'][2];
                       pdatasets python:data['processor'][0];
                       pfigures python:data['processor'][1];
                       isAnon python: here.portal_membership.isAnonymousUser();">

        <fieldset class="organisation-statistics"
                  tal:condition="python:len(odatasets) or len(ofigures)">
          <legend i18n:translate="contribution">Contribution</legend>

          <p tal:condition="not:isAnon" class="portalMessage info"
             i18n:translate="">
              Note that for authenticated users the info below also include the unpublished content.
          </p>

            <!-- Owner -->
            <h5 class="organisation-header-top"
                tal:condition="python:len(odatasets) or len(ofigures)"
                i18n:translate="owner_of">Owner of:</h5>
            <p tal:condition="odatasets">
                <tal:rows content="python:len(odatasets)" />
                <span i18n:translate="">datasets</span>
                ( <a href="" title="" tal:attributes="href string:$portal_url/data-and-maps/data#c5=all&b_start=0&c15=${context/org_url}">see more</a> )
            </p>
            <p tal:condition="ofigures">
                <tal:rows content="python:len(ofigures)" />
                <span i18n:translate="">figures</span>
                ( <a href="" title="" tal:attributes="href string:$portal_url/data-and-maps/figures#c15=all&b_start=0&c6=${context/org_url}">see more</a> )
            </p>
            <p tal:condition="oexternal">
                <tal:rows content="python:len(oexternal)" />
                <span i18n:translate="">external data specs</span>
                ( <a href="" title="" tal:attributes="href string:$portal_url/data-and-maps/data/external#c0=10&b_start=0&c6=${context/org_url}">see more</a> )
            </p>

            <!-- Processor -->
            <h5 i18n:translate="processor_of"
                tal:condition="python:len(pdatasets) or len(pfigures)">Processor of:</h5>
            <p tal:condition="pdatasets">
                <tal:rows content="python:len(pdatasets)" />
                <span i18n:translate="datasets">datasets</span>
                ( <a href="" title="" tal:attributes="href string:$portal_url/data-and-maps/data#c5=all&b_start=0&c16=${context/org_url}">see more</a> )
            </p>
            <p tal:condition="pfigures">
                <tal:rows content="python:len(pfigures)" />
                <span i18n:translate="figures">figures</span>
                ( <a href="" title="" tal:attributes="href string:$portal_url/data-and-maps/figures#c15=all&b_start=0&c17=${context/org_url}">see more</a> )
            </p>
        </fieldset>
    </tal:block>

    <!-- URL -->
    <tal:block define="field python:context.getField('organisationUrl');
                       value python:field.getAccessor(context)()"
              condition="value">
        <dt i18n:translate="organisation_url">URL</dt>
        <dd><a tal:attributes="href value" title="" href="" tal:content="value" /></dd>
    </tal:block>

    <!-- Data policy -->
    <tal:block define="field python:context.getField('data_policy');
                       value python:field.getAccessor(context)()"
              condition="value">
        <dt i18n:translate="organisation_policy">Data policy</dt>
        <dd tal:content="structure value" />
    </tal:block>

    <!-- Address -->
    <tal:block define="field python:context.getField('location');
                       value python:field.getAccessor(context)()"
              condition="value">
        <dt i18n:translate="organisation_location">Location</dt>
        <dd tal:content="structure value" />
    </tal:block>

    <!-- Map -->
    <tal:block define="
        field python:context.getField('location');
        value python:field.getAccessor(context)();
        map context/@@geopositionMap|nothing"
        condition="python:value and map">
        <dt i18n:translate="organisation_map">Map location</dt>
        <tal:map replace="structure map" /><br />
    </tal:block>

</div>

</body>
</html>
